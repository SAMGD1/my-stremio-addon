<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Lists â€“ Admin</title>
  <link rel="stylesheet" href="/admin.css">
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1>My Lists â€“ Admin</h1>
      <div class="subtitle">Auto-sync is running. Open this with <span class="code">?admin=YOUR_PASSWORD</span>.</div>
    </div>

    <div class="grid">
      <div class="card">
        <h3>Current Snapshot</h3>
        <ul id="snapshot"></ul>
        <div class="rowtools">
          <button id="btnSync" class="btn2">Sync IMDb Lists Now</button>
          <button id="btnPurge">ðŸ§¹ Purge & Sync</button>
          <span id="lastSync" class="inline-note"></span>
        </div>
        <h4>Manifest URL</h4>
        <p class="code" id="manifestUrl"></p>
        <p class="mini muted">If you set <b>SHARED_SECRET</b> on the server, append <span class="code">?key=YOUR_SECRET</span>.</p>
      </div>

      <div class="card">
        <h3>Discovered & Sources</h3>

        <div style="margin-top:8px">
          <div class="mini muted">Blocked lists (won't re-add on sync):</div>
          <div id="blockedPills"></div>
        </div>

        <p class="mini muted">We merge your main user (+ extras) and explicit list URLs/IDs. Removing a list also blocks it so it wonâ€™t re-appear on the next sync.</p>

        <div class="row">
          <div><label>Add IMDb <b>User /lists</b> URL</label>
            <input id="userInput" placeholder="https://www.imdb.com/user/urXXXXXXX/lists/"/>
          </div>
          <div><button id="addUser">Add</button></div>
        </div>

        <div class="row">
          <div><label>Add IMDb <b>List</b> URL or ID (lsâ€¦)</label>
            <input id="listInput" placeholder="https://www.imdb.com/list/ls123456789/ or ls123456789"/>
          </div>
          <div><button id="addList">Add</button></div>
        </div>

        <div style="margin-top:10px">
          <div class="mini muted">Your extra users:</div>
          <div id="userPills"></div>
        </div>
        <div style="margin-top:8px">
          <div class="mini muted">Your extra lists:</div>
          <div id="listPills"></div>
        </div>

        <h4 style="margin-top:14px">Discovered</h4>
        <ul id="discovered"></ul>
      </div>
    </div>

    <div class="card" style="margin-top:16px">
      <h3>Customize (enable/disable, order, defaults)</h3>
      <p class="muted">Drag rows to change list order. Click â–¾ on a row to open items: drag posters for a <b>custom</b> order; change <b>Default sort</b> to preview; use <b>Restore from IMDb</b> to clear local add/remove/custom order.</p>
      <div id="prefs"></div>
    </div>
  </div>

  <script src="/admin.js"></script>
</body>
</html>
